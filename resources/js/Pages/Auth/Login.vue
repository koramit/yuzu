<template>
    <Head>
        <title>Yuzu: ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</title>
    </Head>
    <div
        class="flex flex-col justify-center items-center w-full min-h-screen"
        v-if="!busy"
    >
        <div class="w-40 h-40 z-10 rounded-full transform translate-y-12 -translate-x-3">
            <img
                :src="route('home') + '/image/logo.png'"
                alt="üçä"
            >
        </div>
        <div class="mt-4 px-4 py-8 w-80 bg-white rounded shadow transform -translate-y-12">
            <!-- ‚öóÔ∏èüòå üî•üò≠-->
            <span class="block text-xl text-bitter-theme-light mt-12 text-center">‚öóÔ∏è ARI Clinic üòå</span>
            <FormInput
                class="mt-8"
                label="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"
                name="login"
                v-model="form.login"
                :error="form.errors.login"
                ref="login_input"
            />
            <FormInput
                class="mt-2"
                type="password"
                label="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                name="password"
                v-model="form.password"
                :error="form.errors.password"
                @keydown.enter="login"
            />
            <SpinnerButton
                :spin="form.processing"
                class="btn-bitter w-full mt-8"
                @click="login"
            >
                ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
            </SpinnerButton>

            <!-- annoucement -->
            <div class="mt-4 rounded-lg shadow p-4 bg-thick-theme-light text-white font-semibold">
                <p>‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>
                <div class="mt-4">
                    <p class="mt-2 italic text-xs">
                        <span class="underline">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 19 ‡∏°.‡∏Ñ. 2565 ‡πÄ‡∏ß‡∏•‡∏≤ 16:30 - 17:00 ‡∏ô.</span> ‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ß‡∏ä‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® ‡∏†‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ä‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå <span class="underline">‡∏à‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£</span>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÑ‡∏ü‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∏‡∏î
                    </p>
                    <p class="mt-2 text-xs">
                        ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏≤‡∏á <span class="italic text-bitter-theme-light">https://simed.mahidol.ac.th/yuzu</span> ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Internet ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö Intranet ‡∏Ç‡∏≠‡∏á‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä
                    </p>
                    <p class="mt-2 text-xs">
                        ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏≤‡∏á <span class="italic text-bitter-theme-light">https://10.7.14.13/yuzu</span> ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏∞‡∏ö‡∏ö Intranet ‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏≤‡∏ä‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
                    </p>
                    <p class="mt-2 text-xs">
                        ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å üôèüôèüôè
                    </p>
                </div>
                <!-- <div class="mt-4">
                    <p class="mt-2 italic text-xs">
                        ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 20 ‡∏û.‡∏¢. 2564 ‡πÄ‡∏ß‡∏•‡∏≤ 22:00 - 23:00 ‡∏ô. ‡∏ù‡πà‡∏≤‡∏¢‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® ‡∏Ñ‡∏ì‡∏∞‡∏Ø ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏°‡πà‡∏Ç‡πà‡∏≤‡∏¢ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏î‡∏±‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß
                    </p>
                    <p class="mt-2 text-xs">
                        ‡πè Login ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                    </p>
                    <p class="mt-2 text-xs">
                        ‡πè ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏™‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏™‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤
                    </p>
                    <p class="mt-2 text-xs">
                        ‡∏´‡∏≤‡∏Å Login ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞ Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏Å‡∏ï‡∏¥ ‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å üôè
                    </p>
                </div> -->
            </div>
            <a
                v-if="form.errors.login"
                class="mt-4 block text-xs text-red-400"
                href="https://si-eservice.mahidol.ac.th/myaccount/"
                target="_blank"
            >‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</a>
        </div>
    </div>
</template>

<script>
import { useForm } from '@inertiajs/inertia-vue3';
import FormInput from '@/Components/Controls/FormInput';
import SpinnerButton from '@/Components/Controls/SpinnerButton';
import { useCheckSessionTimeout } from '@/Functions/useCheckSessionTimeout';
import { useRemoveLoader } from '@/Functions/useRemoveLoader';
import { nextTick, onMounted, ref } from '@vue/runtime-core';
import { Head } from '@inertiajs/inertia-vue3';
export default {
    components: { FormInput, SpinnerButton, Head },
    setup () {
        useCheckSessionTimeout();
        useRemoveLoader();

        const busy = ref(true);
        const login_input = ref(null);

        onMounted(() => {
            busy.value = false;
            nextTick(() => login_input.value.focus());
        });

        const form = useForm({
            login: null,
            password: null,
            remember: true
        });

        function login() {
            form.transform(data => ({
                login: data.login.toLowerCase(),
                password: data.password,
                remember: data.remember ? 'on' : '',
            })).post(window.route('login.store'), {
                replace: true,
                onFinish: () => form.processing = false,
            });
        }

        return {
            login_input,
            form,
            login,
            busy,
        };
    }
};
</script>

<style scoped>
    .bg-line {
        background-color: #00b900;
    }
    .bg-telegram {
        background-color: #54a9eb;
    }
</style>